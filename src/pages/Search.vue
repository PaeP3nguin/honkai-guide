<template>
  <v-container>
    <v-layout>
      <v-flex xs12 md10>
        <h1>Bilibili search generator</h1>
        <p>
          Some of the Chinese translations courtsey of
          <a href="https://youtu.be/0RR5VR99fvk">The Keebster</a>
          and their excellent
          <a
            href="https://docs.google.com/document/d/1PPZJ4s91tmEBh0Q6J26wbnFapCMioxShS0JhXPtZ4ec/edit"
          >
            Chinese Memorial Glossary
          </a>
          .
        </p>
        <p>
          <b>Psst!</b>
          Do you use
          <a href="http://www.3rdguide.com/web/teamnew/index">3rd guide</a>
          ? Want to open team comps in a new tab? Drag this (
          <!-- Minified with https://jscompress.com/ -->
          <a
            href="javascript:(function(){'use strict';$('#ct_det tbody').off().on('click','tr',function(){const a=$(this).find('.tgcol0').data('url');a!=null&&window.open(a,'_blank')});const a={è®°å¿†æˆ˜åœº:'Memorial Arena','æˆ˜åŒº:':'Bracket',SSSéš¾åº¦:'SSS difficulty',ç»ˆæžæˆ˜åŒº:'Exalted',é«˜çº§æˆ˜åŒº:'Masters','å¼ºæ•Œ:':'Bosses','å¥³æ­¦ç¥ž:':'Valkyries',é˜µå®¹:'Line-up',å¾—åˆ†:'Score',é€ ä»·:'Cost',æ“ä½œéš¾åº¦:'Difficulty',å¥½è¯„æ•°:'Likes',åˆ›å»ºæ—¶é—´:'Date',è¶…å¼¦ç©ºé—´:'Superstring',æ‰°åŠ¨å¹…åº¦:'Disturbance','æ‰˜çº³æä¹ŒÂ·å™¬æ—¥ä¹‹å½±':'Tonatiuh','æ‰˜çº³æä¹Œ-å™¬æ—¥ä¹‹å½±':'Tonatiuh',å¥”ç‹¼çš„é¢†ä¸»:'Andrius',ç¥¸æ–—:'Huodou',å¼å§†çŽ‹:'Homu King',ç»¯ç‹±ä¸¸:'Hellmaru',æµ·å§†è¾¾å°”:'Heimdall',æ¹®ç­æ²‰çµ:'Doom',æ•™çˆ¶å†›å›¢:'Padrino Legion',ç‰¹é‡Œæ³¢å¡:'Mexicatl',è´çº³å‹’æ–¯:'Benares','å§¬éºŸÂ·é»‘':'DXY','MHT-3å’Œå¹³ä½¿è€…':'MHT-3 Pax','MHT-3 å’Œå¹³ä½¿è€…':'MHT-3 Pax','MHT-3B å¤©å ‚ä½¿è€…':'MHT-3B Nirvana',é˜¿æ¹¿æ³¢:'Assaka',åœ°è—å¾¡é­‚:'Jizo Mitama',èµ«è²æ–¯æ‰˜æ–¯:'Hephaestus ',å¸•å‡¡æ:'Parvati',è¢«è¯…å’’çš„è‹±é­‚:'Cursed Soul','ç§‘äºšç‰¹å°”-å¤ç”Ÿä¹‹å½±':'Couatl',å…«é‡éœž:'Kasumi',é™¨å†°ä¹‹å¾‹è€…:'Rimestar','è™šæ ‘ç¥žéª¸-è™šæ— ä¸»ä¹‰':'Nihilus Husk','æ”¯é…ä¹‹å¾‹è€…-ä¹Œåˆä¹‹ä¼—':'Herrscher of Dominance','ä¼ªç¥žÂ·å¥¥æ‰˜':'False God Otto','é€ç«åä¸‰è‹±æ¡€Â·ç§‘æ–¯é­”':'Kosma','æ®µä½:':'Rank',åŽŸç½ª:'Sinful',ç¦å¿Œ:'Forbidden',è‹¦ç—›:'Agony',çº¢èŽ²:'Red lotus',å¯‚ç­:'Nirvana','å¤©æ°”:':'Weather',æé›·:'Lightning',æ€¯ç«:'Fire',æƒ§å†°:'Ice',é‡å­:'Quantum',ç•è¡€:'Physical',ç‹™å‡»:'Ranged',å¤©æ•Œ:'Type counter',ç‡ƒç´ :'Ignite',æˆ˜æ„:'Bloodlust',è™šæ•°:'Imaginary',åšé˜µ:'Fortified',é›·åŠ«:'Paralyze','åŒºåŸŸ:':'Stage',è¾¹ç¼˜åŒº:'Fringe (first)',å¯†é›†åŒº:'Intensive (second)',é«˜å±åŒº:'Perilous (boss)',ç‰¹å¼‚åŒº:'Singular (side)',å¼å§†é­”æœ¯å¸ˆ:'Homu Magician','è™šæ ‘ç¥žéª¸-è™šæ— ä¸»ä¹‰II':'Nihilus Husk (hit count)','ç¥žæœº-æµ·å§†è¾¾å°”':'Heimdall','å¨‘å©† é˜¿æ¹¿æ³¢':'Saha Assaka',ç¾¤æ€ª:'Mobs','é€ç«åä¸‰è‹±æ¡€ çˆ±èŽ‰å¸Œé›…':'Flame Chaser Elysia',ç¬¦åŽ:'Fu Hua',è¯†ä¹‹å¾‹è€…:'Herrscher of Sentience',äº‘å¢¨ä¸¹å¿ƒ:'Azure Empyrea',é›¾éƒ½è¿…ç¾½:'Hawk of the Fog',ç™½å¤œæ‰§äº‹:'Night Squire',ç‚½ç¿Ž:'Phoenix','å½±éª‘å£«Â·æœˆè½®':'Shadow Knight','å¥³æ­¦ç¥žÂ·è¿…ç¾½':'Valkyrie Accipiter',æ˜Žæ—¥é¦™:'Asuka',å…«é‡æ¨±:'Yae',å¤œéšé‡éœž:'Darkbolt Jonin',çœŸç‚Žå¹¸é­‚:'Flame Sakitama',é€†ç¥žå·«å¥³:'Gyakushinn Miko','å¾¡ç¥žè£…Â·å‹¿å¿˜':'Goushinnso Memento','å¸Œå„¿Â·èŠ™ä¹è‰¾':'Seele',é­‡å¤œæ˜Ÿæ¸Š:'Starchasm Nyx',å½¼å²¸åŒç”Ÿ:'Stygian Nymph',å¹»æµ·æ¢¦è¶:'Swallowtail Phantasm',å¹½å…°é»›å°”:'Durandal','å¥³æ­¦ç¥žÂ·è£å…‰':'Valkyrie Gloria','è¾‰éª‘å£«Â·æœˆé­„':'Bright Knight: Excelsis',ä¸ç­æ˜Ÿé”š:'Dea Anchora',å¤©å…ƒéª‘è‹±:'Palatinus Equinox',å¾·ä¸½èŽŽ:'Theresa','æš®å…‰éª‘å£«Â·æœˆç…Œ':'Twilight Paladin',æœˆä¸‹åˆæ‹¥:'Luna Kindred',ç¥žæ©é¢‚æ­Œ:'Celestial Hymn','å¤„åˆ‘è£…Â·ç´«è‹‘':'Violet Executer',æ¨±ç«è½®èˆž:'Sakura Rondo','å¥³æ­¦ç¥žÂ·èª“çº¦':'Valkyrie Pledge',æœ”å¤œè§‚æ˜Ÿ:'Starlit Astrologos',çªäºšå¨œ:'Kiana',è–ªç‚Žä¹‹å¾‹è€…:'Herrscher of Flamescion',å¤©ç©¹æ¸¸ä¾ :'Void Ranger',ç©ºä¹‹å¾‹è€…:'Herrscher of the Void',åœ£å¥³ç¥ˆç¥·:'Divine Prayer','å¥³æ­¦ç¥žÂ·æ¸¸ä¾ ':'Valkyrie Ranger','ç™½éª‘å£«Â·æœˆå…‰':'Knight Moonbeam','é¢†åŸŸè£…Â·ç™½ç»ƒ':'White Comet',å¸ƒæ´›å¦®å¨…:'Bronya',è¿·åŸŽéª‡å…”:'Haxxor Bunny',ç†ä¹‹å¾‹è€…:'Herrscher of Reason',å½—æ˜Ÿé©±åŠ¨:'Drive Kometa',å¼‚åº¦é»‘æ ¸ä¾µèš€:'Black Nucleus',é“¶ç‹¼çš„é»Žæ˜Ž:'Wolfs Dawn',æ¬¡å…ƒè¾¹ç•Œçªç ´:'Dimension Breaker','å¥³æ­¦ç¥žÂ·æˆ˜è½¦':'Valkyrie Chariot','é©±åŠ¨è£…Â·å±±å¹':'Yamabuki Armor',é›ªåœ°ç‹™å‡»:'Snowy Sniper',æ¬¡ç”Ÿé“¶ç¿¼:'Silverwing: N-EX',é˜¿ç³å§å¦¹:'Twins',ç‹‚çƒ­è“è°ƒÎ”:'Fervent Tempo Delta',æ¨±æ¡ƒç‚¸å¼¹:'Molotov Cherry',è“èŽ“ç‰¹æ”»:'Blueberry Blitz',èŠ½è¡£:'Mei',æ–­ç½ªå½±èˆž:'Danzai Spectramancer',é›·ä¹‹å¾‹è€…:'Herrscher of Thunder',ç ´æ™“å¼ºè¢­:'Striker Fulminata',é›·ç”µå¥³çŽ‹çš„é¬¼é“ :'Lightning Empress','è„‰å†²è£…Â·ç»¯çº¢':'Crimson Impulse','å¥³æ­¦ç¥žÂ·å¼ºè¢­':'Valkyrie Bladestrike',å½±èˆžå†²å‡»:'Shadow Dash',ä¸½å¡”:'Rita',å¤±è½è¿·è¿­:'Fallen Rosemary','è‹éª‘å£«Â·æœˆé­‚':'Argent Knight: Artemis','çŒŽè¢­è£…Â·å½±é“':'Phantom Iron',é»¯è”·è–‡:'Umbral Rose',ç¼­ä¹±æ˜Ÿæ£˜:'Spina Astera',å§¬å­:'Himeko','çœŸçº¢éª‘å£«Â·æœˆèš€':'Vermilion Knight: Eclipse',æžåœ°æˆ˜åˆƒ:'Arctic Kriegsmesser','èžæ ¸è£…Â·æ·±çº¢':'Scarlet Fusion',æˆ˜åœºç–¾é£Ž:'Battle Storm','å¥³æ­¦ç¥žÂ·å‡¯æ—‹':'Valkyrie Triumph',è¡€è‰²çŽ«ç‘°:'Blood Rose',å¡èŽ²:'Kallen',åŽŸç½ªçŒŽäºº:'S\xFCndenj\xE4ger',ç¬¬å…­å¤œæƒ³æ›²:'Sixth Serenade','åœ£ä»ªè£…Â·ä»Šæ ·':'Imayoh Ritual',è²è°¢å°”:'Fischl','æ–­ç½ªçš‡å¥³ï¼ï¼':'Prinzessin der Verurteilung',çˆ±èŽ‰å¸Œé›…:'Elysia','ç²‰è‰²å¦–ç²¾å°å§â™ª':'Miss Pink Elf','å¨œå¡”èŽŽÂ·å¸Œå¥¥æ‹‰':'Raven',åˆå¤œè‹¦è‰¾:'Midnight Absinthe',æ¢…æ¯”ä¹Œæ–¯:'Mobisus','æ— é™Â·å™¬ç•Œä¹‹è›‡':'Infinite Ouroboros','å¡èå°”Â·ä½©ç€':'Carole Pepper',ç”œè¾£å¥³å­©:'Sweet n Spicy',å¸•æœµè²èŽ‰ä¸:'Pardofelis','ç©ºæ¢¦Â·æŽ é›†ä¹‹å…½':'Reverist Calico',é˜¿æ³¢å°¼äºš:'Aponia','æˆ’å¾‹Â·æ·±ç½ªä¹‹æ§›':'Disciplinary Perdition',ä¼Šç”¸:'Eden','é»„é‡‘Â·ç’€è€€ä¹‹æ­Œ':'Golden Diva',æ ¼è•¾ä¿®:'Griseo','ç¹æ˜ŸÂ·ç»˜ä¸–ä¹‹å·':'Starry Impression',ç»´å°”è–‡:'Vill-V'},b=function(a,b){b&&a[b.innerText]&&(b.innerHTML=b.innerHTML.replace(b.innerText,a[b.innerText]))},c=function(){const c=$('.filter-text > input').val();$('.filter-text > input').val('\u8D85\u5F26\u7A7A\u95F4'===c?'Abyss':'MA'),$('th, span, .table-search, .label, .title').each(function(){b(a,this)}),$('.table-team-box .table-search').height(600),$('.table-search .goodwar .content').height(500)};$('.table-search').on('click','.select-item',()=>setTimeout(c,200)),$('.el-select-dropdown__item').on('click',()=>setTimeout(c,200)),c()})();"
          >
            Fix 3rd guide
          </a>
          ) link to your bookmark bar and click it when you're on the site! The script also
          translates all the bosses and valks (turn off Chrome auto-translation first). Many thanks
          for zkwp of Lumina for the script. For the latest version or if you use TamperMonkey, find
          the script at
          <a
            href="https://github.com/PaeP3nguin/honkai-guide/blob/master/src/assets/3rdguide.user.js"
          >
            Github
          </a>
          .
        </p>

        <v-layout align-center>
          <img class="valk-gif mr-2" :src="require('@/assets/aij2.gif')" />
          <span>Ai-chan says, "Only fill out as much as you need!"</span>
        </v-layout>

        <v-form>
          <h3 class="section-head">Boss</h3>
          <v-autocomplete
            v-model="selectedBoss"
            hint="Start typing to autocomplete."
            autofocus
            auto-select-first
            clearable
            persistent-hint
            :items="bosses"
          ></v-autocomplete>
          <v-checkbox v-model="sssBoss" label="SSS Boss?"></v-checkbox>

          <h3 class="section-head">Valkyries</h3>
          <p>Order matters! Choose the lead valk first.</p>
          <v-autocomplete
            v-model="selectedValks"
            hint="Start typing to autocomplete."
            multiple
            auto-select-first
            clearable
            persistent-hint
            @change="valkInput = ''"
            :search-input.sync="valkInput"
            :items="valks"
          ></v-autocomplete>

          <h3 class="section-head">Modifiers</h3>
          <v-layout wrap>
            <v-flex grow xs4 md3 v-for="modifier in modifiers" v-bind:key="modifier.name">
              <v-checkbox v-model="modifier.value" :label="`${modifier.name}`"></v-checkbox>
            </v-flex>
          </v-layout>

          <h3 class="section-head">Score</h3>
          <v-combobox
            v-model="score"
            hint="All input accepted, or choose from the list."
            auto-select-first
            clearable
            persistent-hint
            :items="scores"
          ></v-combobox>
        </v-form>

        <h2 class="section-head">Generated links</h2>
        <v-layout align-center>
          <img class="valk-gif mr-2" :src="require('@/assets/brn.gif')" />
          <span>Bronya works hard to instantly generate links as you type.</span>
        </v-layout>
        <p>Some bosses/valks go by multiple names, so try all links!</p>
        <v-checkbox v-model="googleToggle" label="Swap to Google"></v-checkbox>
        <v-checkbox
          v-if="googleToggle"
          v-model="googleToggleBili"
          label="BiliÂ² from Google"
        ></v-checkbox>
        <p v-for="link in biliLinks" v-bind:key="link">
          <a target="_blank" class="bili-link" :href="`${link}`">{{ link }}</a>
        </p>

        <h2 class="section-head">Changelog</h2>
        <ul>
          <li>2022/12/11 - Updated scoring for SSS bosses, thanks HauNguyenThe</li>
          <li>2022/11/25 - Add Opaque Shadow and Nocturnal Knight, thanks Cyxo</li>
          <li>2022/11/06 - Sus search term, gear, Willows stig, SoE key, thanks Pootz</li>
          <li>2022/10/03 - Add Vill-V, HoH equips, thanks Pootz</li>
          <li>
            2022/08/17 - Add Kosma boss, thanks Neal/Gwent, include Vill-V in valkyries, updated
            3rdguide bookmarklet
          </li>
          <li>2022/07/23 - Updated 3rdguide bookmarklet URL and search terms w/ new valks</li>
          <li>2022/07/21 - Add Seven Thunders PRI to calc, thanks Pootz</li>
          <li>2022/07/04 - Add Vill-V boss and Griseo valk ðŸ˜­, thanks TencentDimepiece</li>
          <li>2022/06/29 - Add option to use Google to search bilibili, thanks TencentDimepiece</li>
          <li>
            2022/05/26 - Add Aponia weapons, Handel and Zeno stigs, Echo of Paradise, thanks Pootz
          </li>
          <li>2022/05/17 - Add Sushang and Husk search terms, thanks HauNguyenThe</li>
          <li>2022/04/30 - Add Aponia and Eden search terms, thanks HauNguyenThe</li>
          <li>2022/04/30 - Add Felis search term, thanks Pootz</li>
          <li>2022/04/12 - Add Felis gear, thanks Pootz</li>
          <li>2022/04/04 - Add Q-Manifold modifier, thanks Reinbex</li>
          <li>2022/03/24 - Add Elysia to bosses</li>
          <!-- <li>2022/03/13 - Add Otto to bosses and no Paganini modifier, thanks Pootz</li>
          <li>2022/03/13 - Add Spina Astera gear to calc, thanks Pootz</li>
          <li>2022/02/25 - Add PE gear to calc, thanks Pootz</li>
          <li>2022/02/25 - Add Spina Astera to search and 3rdguide bookmark, thanks Toast</li>
          <li>2022/02/01 - Update HoD search translations, thanks Toast</li>
          <li>2022/02/01 - Add Palatinus Equinox to search and 3rdguide bookmark, thanks Pootz</li>
          <li>2022/01/24 - Add no Turg and no Zhenyi modifiers, thanks Pootz</li>
          <li>2022/01/19 - Add Silverwing equips to gear calc, thanks Pootz</li>
          <li>2022/01/19 - Add Silverwing to search and 3rdguide bookmarklet</li>
          <li>2021/12/12 - Add toggle for SSS boss</li>
          <li>2021/12/10 - Update 3rdguide bookmark with more abyss translations</li>
          <li>2021/11/18 - Add Paganini stig to calc, thanks Pootz</li>
          <li>2021/11/18 - Add Carole to search and 3rdguide bookmark</li>
          <li>2021/10/24 - Add mobisus and raven gear to calc, thanks Pootz</li>
          <li>2021/10/20 - Update 3rdguide bookmark with abyss translations</li>
          <li>2021/10/19 - Add Herrscher of Dominance boss</li>
          <li>2021/10/19 - Add Mobisus, Raven to searcher, 3rdguide bookmarklet</li>
          <li>2021/09/23 - Add SSS scores to scores page and search sidebar</li>
          <li>2021/09/20 - Add Elysia stigs, bow, and Abyss Flower PRI to calc, thanks Pootz</li>
          <li>2021/09/04 - Add Elysia valk, thanks Aria</li>
          <li>2021/08/29 - Add Poe and Acheron to gear calc, thanks Pootz</li>
          <li>2021/08/21 - Add Elysian Realm modifier, thanks Bento and Eku</li>
          <li>2021/08/18 - Add HoFS weapon and stigs to gear calc, thanks Pootz</li>
          <li>2021/08/17 - Update fix 3rdguide script with new translations and UI fixes</li>
          <li>2021/08/16 - Add HoFS abbreviation, thanks Jun</li>
          <li>2021/08/07 - Fix HoS translation, thanks Jun</li>
          <li>2021/07/25 - Add HoFS and MHT-3B (new tank), updated fix 3rdguide script</li>
          <li>2021/06/09 - Add Andrius boss and Fischl valk, update fix 3rdguide script</li>
          <li>2021/05/13 - Add Kasumi boss and Starchasm Nyx valk, update fix 3rdguide script</li>
          <li>2021/04/24 - Add Haxxor Bunny valk, HoS boss, update fix 3rdguide script</li>
          <li>2021/02/16 - Add Blazing Hope valk, update fix 3rdguide script</li>
          <li>2021/02/15 - Add HoS, thanks Idol Party discord!</li>
          <li>2021/01/01 - Happy new year! Add Couatl boss, thanks Charlie</li>
          <li>2020/12/16 - Add DA (thanks Echidna), update 3rd guide script, nicknames for HoV</li>
          <li>2020/12/16 - Add Rimestar boss, adjust Seele suit names, thanks Echidona</li>
          <li>2020/11/07 - Add FTD to fix 3rd guide script</li>
          <li>2020/11/07 - Add alternate name for FTD</li>
          <li>2020/09/22 - Add Fervent Tempo Delta valk</li>
          <li>2020/09/16 - Add Nihilus Husk boss</li>
          <li>2020/09/15 - Add Nirvana to modifiers</li>
          <li>2020/09/12 - Add DS to 3rd guide bookmarklet</li>
          <li>2020/09/04 - Add DS valk</li>
          <li>2020/08/30 - Add exalted abyss modifier</li>
          <li>2020/08/30 - Update Fix 3rd guide bookmarklet with Huodou and FR, add FR to valks</li>
          <li>2020/08/24 - Add Huodou boss</li>
          <li>2020/08/19 - Add SS lead skill as modifier, thanks Toast</li>
          <li>2020/08/19 - Add SS LE as modifier</li>
          <li>2020/08/19 - Add no Shuijing search modifier, thanks Younggeddes</li>
          <li>2020/08/06 - Add Masters MA to options</li>
          <li>2020/08/04 - Add new nickname for DJ, thanks Toast</li>
          <li>2020/07/28 - Update Fix 3rd guide bookmarklet with SA and HoT</li>
          <li>2020/06/08 - Add BKE, made some URL generation improvements.</li>
          <li>2020/06/02 - Add Starlit Astrologos (Zhuge) to valks</li>
          <li>2020/05/25 - Update fix 3rd guide bookmarklet</li>
          <li>2020/05/01 - Add death web + gigant abyss boss</li>
          <li>2020/05/02 - Add soul link abyss boss</li>
          <li>2020/04/24 - Add real name of S Durandal</li>
          <li>2020/04/20 - Add projected boss schedule</li>
          <li>2020/04/06 - Another nickname for Hephaestus</li>
          <li>2020/04/04 - Added double wendy abyss boss</li>
          <li>2020/04/01 - Added emperor abyss boss</li>
          <li>2020/03/31 - Added "S Durandal"</li>
          <li>2020/03/14 - Update fix 3rd guide bookmarklet and add VG</li>
          <li>2020/03/07 - Delet 3.6 boss pool</li>
          <li>2020/03/04 - Upgraded Fix 3rd guide bookmarklet</li>
          <li>2020/02/01 - Add Azure Empyrea</li>
          <li>2020/01/07 - Increase granularity of scores by time</li>
          <li>2020/01/06 - Added HF</li>
          <li>2019/12/15 - Actually we following CN bosses</li>
          <li>2019/12/01 - Added 3.6 boss pool to sidebar</li>
          <li>2019/10/22 - Added quantum ball name</li>
          <li>2019/10/22 - Added quantum ball and both Seeles</li>
          <li>2019/10/17 - Change scores by time to every 5 seconds due to EX MA...</li>
          <li>2019/10/12 - Make TP also autocomplete to VE</li>
          <li>2019/10/10 - Added Fix 3rd guide bookmarklet!</li>
          <li>2019/10/05 - Added AKA to valk list</li>
          <li>2019/09/21 - Added scores by time sidebar</li>
          <li>2019/09/03 - Added Roza</li>
          <li>2019/09/02 - Added EX MA</li>
          <li>2019/09/02 - Added MR-06X Hephaestus</li>
          <li>2019/08/19 - Added MHT-3 Pax</li>
          <li>2019/08/11 - Added AKA boss</li>
          <li>2019/08/10 - Added Void Drifter valk, Q-Singularis modifier</li> -->
        </ul>
      </v-flex>

      <v-flex hidden-sm-and-down offset-xs1 md-flex md2>
        <BossLineupList></BossLineupList>

        <h2 class="mt-6">Projected boss lineups</h2>
        <p>
          Our boss schedule seems to match CN's, offset by patch schedule. For example, week 1 of
          patch 3.8, CN had AKA, Hephaestus, Hellmaru. SEA/NA then had the same bosses on week 1 of
          patch 3.8.
        </p>

        <p class="mb-1" v-for="lineup in lineups" v-bind:key="lineup.id">
          {{ lineup.date | dateFormat("M/DD") }} -
          <template v-if="lineup.bosses">{{ lineup.bosses | lineupFormat }}</template>
          <template v-if="lineup.event">{{ lineup.event }}</template>
        </p>

        <h2 class="mt-6">Scores by time</h2>
        <ul>
          <li>time = ss / sss / up</li>
          <li v-for="s in scoresByTime" v-bind:key="s.score">
            {{ s.elapsedSec | countdownSeconds }} = {{ s.ssScore }} / {{ s.base }} / {{ s.up }}
          </li>
        </ul>
      </v-flex>
    </v-layout>
  </v-container>
</template>

<style lang="scss">
.section-head {
  margin-top: 1.8em;
}

.v-autocomplete {
  padding-top: 0px;
}

.bili-link {
  font-size: 1.5em;
}

.valk-gif {
  height: 80px;
}
</style>

<script lang="ts">
import Vue from "vue";
import { generateScores, countdownSecondsFilter } from "@/util/score_util";
import { RECENT_LINEUPS } from "@/data/boss_lineups";
import { Boss } from "@/models/boss";
import BossLineupList from "@/components/BossLineupList.vue";

const bossToChinese = {
  "Andrius (wolf)": ["å¥”ç‹¼çš„é¢†ä¸»", "å¥”ç‹¼", "åŒ—é£Žç‹¼"],
  Assaka: ["é˜¿æ¹¿æ³¢", "asb"],
  "Argent Knight: Artemis (AKA)": ["æœˆé­‚"],
  Benares: ["è´çº³å‹’æ–¯", "è´è´é¾™", "é¾™"],
  "Bright Knight - Excelsis (BKE)": ["æœˆé­„", "å¹½å…°æˆ´å°”"],
  "Couatl: Revenant": ["é‡å­å¸çŽ‹", "æ³¥é³…"],
  "Cursed Soul": ["å§¬å­", "è¢«è¯…å’’çš„è‹±é­‚"],
  "Dark Jixuanyuan (DXY, DJXY)": ["çš®çš®é©¬", "é©¬"], // "å§¬éºŸÂ·é»‘"],
  "Death Web + Gigant (Abyss only)": ["èœ˜è››æ³°å¦"],
  Doom: ["æ²‰çµ", "æ¹®ç­æ²‰çµ"],
  "Double Wendy (all the way) (Abyss only)": ["åŒæ¸©è’‚"],
  Elysia: ["çˆ±èŽ‰å¸Œé›…", "çˆ±èŽ‰", "çˆ±"],
  "Emperor (Abyss only)": ["å¸çŽ‹"],
  "Herrscher of the Void (God Kiana, GK, HoV)": ["ç©ºä¹‹å¾‹è€…", "å¥³çŽ‹"],
  Heimdall: ["æµ·å§†è¾¾å°”", "æµ·èƒ–"],
  Hellmaru: ["ç‹ç‹¸", "ç»¯ç‹±ä¸¸"],
  "Herrscher of Dominance (HoD)": ["åƒå¾‹", "ä¹Œåˆä¹‹ä¼—"],
  "Herrscher of Sentience (HoS)": ["è¯†ä¹‹å¾‹è€…"],
  "HOMU King": ["å¼å§†"],
  Huodou: ["ç¥¸æ–—"],
  "Jizo Mitama": ["åœ°è—", "åœ°è—å¾¡é­‚"],
  Kallen: ["å¡èŽ²"],
  Kasumi: ["å…«é‡éœž"],
  Kosma: ["ç§‘æ–¯é­”"],
  "Li Sushang": ["æŽç´ è£³"],
  "Mexicatl: Umbreist (quantum ball)": ["çƒ", "é‡å­å†›å›¢"],
  "MHT-3 Pax (tank)": ["å’Œå¹³ä½¿è€…", "MHT", "å¦å…‹"],
  "MHT-3B (new tank)": ["MHT-3B", "å¤©å ‚ä½¿è€…"],
  "MR-06X Hephaestus": ["èµ«è²æ–¯æ‰˜æ–¯", "ç­ç«å™¨"],
  "Nihilus Husk (clock)": ["è™šæ ‘ç¥žéª¸", "lzx"],
  "Otto Apocalypse": ["ä¼ªç¥žå¥¥æ‰˜", "å¥¥æ‰˜"],
  Padrino: ["æ•™çˆ¶"],
  Parvati: ["å†°çŒª", "å¸•å‡¡æ"],
  Rimestar: ["å†°å¾‹", "é™¨å†°ä¹‹å¾‹è€…"],
  RPC: ["é£žæœº", "RPC - 6626"],
  "Shadow Knight (SK)": ["æœˆè½®"],
  "Son of Darkness (Abyss only)": ["é»‘å¤œä¹‹å­"],
  "Titan + Hierophant (soul link mobs) (Abyss only)": ["å…³åº•", "åŒçµé­‚é“¾æŽ¥", "çº¢èŽ²æ³°å¦"],
  "Tonatiuh (lobster)": ["æ‰˜çº³æä¹Œ", "é¾™è™¾"],
  "Wendy + Ganesha (Abyss only)": ["çŒªæ¸©"],
  "Vill-V": ["ç»´å°”è–‡", "V2V"],
  "Opaque Shadow (quantum whale)": ["è”½å…‰ä¹‹å½±"],
  "Nocturnal Knight (blood thorn)": ["ç…Œå¤œéª‘å£«"],
};

const valkToChinese = {
  "Accipiter (VA)": ["è¿…"],
  Aponia: ["é˜¿", "é˜¿æ³¢å°¼äºš"],
  "Arctic Kreigmesser (KMS)": ["æž"],
  "Argent Knight: Artemis (AKA)": ["æœˆé­‚"],
  "Azure Empyrea (AE)": ["äº‘", "å¢¨", "äº‘å¢¨ä¸¹å¿ƒ"],
  "Black Nucleus (BN)": ["é»‘"],
  "Battlestorm (BS)": ["ç–¾"],
  "Bladestrike (VB)": ["å¼º"],
  "Blazing Hope (BH, Asuka)": ["æ˜Žæ—¥é¦™"],
  "Blood Rose (BR)": ["çŽ«"],
  "Bright Knight: Excelsis (BKE)": ["æœˆé­„", "è¾‰éª‘å£«æœˆ"],
  "Carole Pepper": ["å¡èå°”", "ç”œè¾£å¥³å­©"],
  "Celestial Hymn (CH)": ["ç¥ž"],
  "Chariot (VC)": ["æˆ˜"],
  "Crimson Impulse (CI)": ["ç»¯"],
  "Danzai Spectramancer (DS)": ["å½±", "æ–­ç½ªå½±èˆž"],
  "Herrscher of Reason (HoR, Tronya)": ["ç†", "å¾‹é¸­"],
  "Darkbolt Jonin (DJ)": ["å¤œéšé‡éœž", "é›·å…«"],
  "Dea Anchora (DA)": ["ä¸ç­æ˜Ÿé”š", "æ˜Ÿ", "é”š"],
  "Dimension Break (DB)": ["æ¬¡"],
  "Divine Prayer (DP)": ["åœ£"],
  "Eden (GD)": ["ä¼Š", "ä¼Šç”¸"],
  "Elysia (Miss Pink Elf, MPE)": ["çˆ±èŽ‰å¸Œé›…", "çˆ±èŽ‰", "çˆ±"],
  "Fallen Rosemary (FR)": ["è¿·", "å¤±è½è¿·è¿­"],
  "Fervent Tempo Delta (FTD)": ["ç‹‚çƒ­è“è°ƒ", "ç²‰"],
  "Fischl (PV)": ["çš‡", "å°è‰¾å’ª", "çš‡å¥³"],
  "Flame Sakitama (FS)": ["ç‚Ž"],
  "Hawk of the Fog (HF)": ["è¿…", "è¿…é›·", "é›¾éƒ½è¿…ç¾½"],
  "Haxxor Bunny (HB)": ["éª‡å…”", "è¿·åŸŽéª‡å…”"],
  "Herrscher of Flamescion (HoFS, KFC)": ["è–ª", "ç‚Ž", "è¤ç«è™«", "è–ªç‚Žä¹‹å¾‹è€…"],
  "Herrscher of Human Ego (HoH, HoHE, HoE)": ["äºº", "çˆ±çŒ«å…”", "çˆ±å¾‹"],
  "Herrscher of the Void (God Kiana, GK, HoV)": ["å¾‹"],
  "Herrscher of Sentience (HoS)": ["è¯†ä¹‹å¾‹è€…", "è¯†å¾‹", "è¯†"],
  "Herrscher of Thunder (HoT, HT)": ["é›·ä¹‹å¾‹è€…", "é›·å¾‹", "é›·"],
  "Imayoh (IR)": ["ä»Š"],
  "Infinite Ouroboros (IO, Mobius)": ["æ— é™Â·å™¬ç•Œä¹‹è›‡", "å™¬ç•Œ", "è›‡ä¸»"],
  "Jade Knight (Li Sushang)": ["æŽ", "æŽç´ è£³", "çŽ‰éª‘å£«æœˆç—•"],
  "Knight Moonbeam (KMB)": ["æœˆ"],
  "Lightning Empress (LE)": ["é¬¼"],
  "Liliya (Blueberry Blitz / BB)": ["è“"],
  "Luna Kindred (LK)": ["æœˆ", "åˆ"],
  "Memento (Meme)": ["å‹¿"],
  "Midnight Absinthe (Raven)": ["åˆå¤œè‹¦è‰¾", "æ¸¡é¸¦"],
  Miko: ["é€†"],
  "Molotov Cherry (Roza, MC)": ["ç²‰", "å­¤å„¿é˜Ÿ"],
  "Night Squire (NS)": ["ç™½"],
  "Palatinus Equinox (PE, Juan)": ["å¤©å…ƒéª‘è‹±", "å¤©å…ƒ"],
  "Phantom Iron (PI)": ["ç‹—"],
  "Phoenix (PX)": ["ç‚½"],
  "Pledge (VP)": ["èª“"],
  "Ranger (VR)": ["æ¸¸"],
  "Reverist Calico (RC, Cat, Neko, Pardofelis)": ["çŒ«"],
  "Rondo (SR)": ["æ¨±"],
  "Scarlet Fusion (SF)": ["æ·±"],
  "Sin Hunter (Sundenjaegar / SJ)": ["åŽŸç½ª"],
  "Snowy Sniper (SS)": ["é›ª"],
  "Shadow Dash (SD)": ["å½±"],
  "Shadow Knight (SK)": ["è½®"],
  "Silverwing: N-EX": ["ç¿¼", "å¤§é¸­é¸­", "æ¬¡ç”Ÿé“¶ç¿¼"],
  "Sixth Serenade (6S)": ["å…­"],
  "Spina Astera (SpA)": ["æ˜Ÿ", "æ˜Ÿæ£˜", "ç¼­ä¹±æ˜Ÿæ£˜"],
  "Starchasm Nyx": ["é­‡å¤œæ˜Ÿæ¸Š", "å†°å¸Œ"],
  "Starlit Astrologos (SA, Zhuge)": ["æœ”å¤œè§‚æ˜Ÿ", "è§‚"],
  "Starry Impression (SI, Griseo)": ["æ ¼", "æ ¼è•¾ä¿®"],
  "Stygian Nymph (SN)": ["é»‘å¸Œ", "å¸Œ"], // å½¼å²¸åŒç”Ÿ
  "Swallowtail Phantasm (SP)": ["å¹»æµ·æ¢¦è¶", "Aå¸Œ"],
  "Triumph (VT)": ["å‡¯"],
  "Umbral Rose (UR)": ["é»¯"],
  "Valkyrie Gloria (VG)": ["è£å…‰", "å¥³æ­¦ç¥žÂ·è£å…‰"],
  "Vermillion Knight (VK)": ["çœŸ"],
  "Void Drifter (VD)": ["æ¸¸"], // è‹ç©¹æ¸¸ä¾ 
  "Vill-V": ["ç»´å°”è–‡", "V2V"],
  "Violet Executor/Twilight Paladin (VE/TP)": ["ç´«"],
  "White Comet (WC)": ["ç™½"],
  "Wolf Dawn (WD)": ["é“¶"],
  "Yamabuki Armor/Drive Kometa (YA)(DK)": ["å±±"],
};

const modifiersToChinese = {
  "F2P / No gacha Gear": ["é›¶è›‹"],
  "2 - 3 pieces of gacha gear": ["ä½Žé…"],
  "No JST": ["æ— å¶"],
  "No Newton": ["æ— ç‰›"],
  "No Paganini": ["æ— å¸•"],
  "No Shuijing": ["æ— æ°´"],
  "No Zhenyi": ["æ— è´žä»ª"],
  "No Turgenev": ["æ— å± "],
  "No ELFs": ["æ— äººå¶"],
  "SS LE": ["SSé¬¼", "2Sé¬¼"],
  "SS lead skill": ["SSé˜Ÿé•¿æŠ€", "2Sé˜Ÿé•¿æŠ€"],
  "Exalted MA": ["ç»ˆæžåŒº"],
  "Masters MA": ["é«˜çº§åŒº"],
  Dirac: ["è¿ªæ‹‰å…‹", "ç‹„æ‹‰å…‹"],
  "Q-Singularis": ["é‡å­å¥‡ç‚¹"],
  "Q-Manifold": ["é‡å­æµå½¢"],
  "Exalted Abyss": ["è¶…å¼¦ç©ºé—´"],
  "Red Lotus": ["çº¢èŽ²"],
  Myriad: ["æ— é™"],
  Nirvana: ["å¯‚ç­"],
  "Sim battle": ["æ¨¡æ‹Ÿä½œæˆ˜å®¤"],
  "Elysian Realm": ["å¾€ä¸–ä¹åœŸ", "å¾€äº‹ä¹åœŸ"],
  "Honkai Impact 3": ["å´©å3"],
};

const modifiers = Object.keys(modifiersToChinese).map((m) => ({
  name: m,
  value: false,
}));

const scoresByTime = generateScores(45);

function isMobile(): boolean {
  return window.navigator.userAgent.toLowerCase().includes("mobi");
}

function* combine(arrOfArr: string[][]) {
  const [head, ...tail] = arrOfArr;
  const remainder = tail.length ? combine(tail) : [[]];
  for (const r of remainder) for (const h of head) yield [h, ...r];
}

export default Vue.extend({
  data: function () {
    return {
      selectedBoss: null,
      sssBoss: false,
      selectedValks: [],
      valkInput: null,
      score: null,
      bosses: Object.keys(bossToChinese),
      valks: Object.keys(valkToChinese),
      scores: scoresByTime.map((s) => s.ssScore),
      scoresByTime: scoresByTime,
      modifiers: modifiers,
      lineups: RECENT_LINEUPS,
      googleToggle: false,
      googleToggleBili: true,
    };
  },
  components: { BossLineupList },
  computed: {
    bossNames: function () {
      if (this.selectedBoss === null) {
        return [""];
      }

      if (this.sssBoss) {
        return bossToChinese[this.selectedBoss].map((bossName) => "SSS" + bossName);
      } else {
        return bossToChinese[this.selectedBoss];
      }
    },
    // Some valks have multiple names, make all combos of valk team.
    valkCombos: function () {
      let combos = [""];
      this.selectedValks
        .map((v) => valkToChinese[v])
        .forEach((names) => {
          combos = combos.reduce((acc, curr) => {
            names.forEach((n) => acc.push(curr + n));
            return acc;
          }, []);
        });
      return combos;
    },
    // Converts valk combinations to use the google OR search notation.
    valkCombosGoogle: function () {
      let combos = [];
      this.selectedValks
        .map((v) => valkToChinese[v])
        .forEach((names) => {
          combos.push(`(${names.join("|")})`);
        });
      return combos;
    },
    biliLinks: function () {
      // Static modifiers that go at the end.
      let modifierParams = this.modifiers
        .filter((m) => m.value)
        .map((m) => modifiersToChinese[m.name]);

      if (this.googleToggle) {
        // Google search queries don't need any combinations since they can use the OR operator, so separating this
        // logic out.
        return [
          "https://www.google.com/search?q=" +
            [
              this.selectedBoss ? `(${this.bossNames.join("|")})` : "",
              this.valkCombosGoogle.join(" "),
              modifierParams.length
                ? `(${modifierParams.map((params) => params.join("|")).join(" ")})`
                : "",
              this.score,
              this.googleToggleBili ? "site:https://www.bilibili.com" : "",
            ]
              // Remove empty strings and nulls to avoid extra spaces and weirdness in the output.
              .filter((n) => n)
              .join(" "),
        ];
      }

      if (this.score) {
        modifierParams.push([this.score]);
      }
      // Must have at least one element in each array passed to combine to generate anything.
      modifierParams = modifierParams.length ? modifierParams : [[""]];
      const modifierCombos = Array.from(combine(modifierParams)).map((c: string[]) =>
        c.join(" ").trim()
      );

      const baseUrl = isMobile()
        ? "https://m.bilibili.com/search?keyword="
        : "https://search.bilibili.com/all?keyword=";

      const combinations: string[][] = Array.from(
        combine([this.bossNames, this.valkCombos, modifierCombos])
      );
      return combinations
        .map((c: string[]) => `${baseUrl}${c.join(" ").trim()}`)
        .sort(function (a, b) {
          return a.length - b.length || a.localeCompare(b);
        });
    },
  },
  filters: {
    countdownSeconds: countdownSecondsFilter,
    lineupFormat: function (bosses: Boss[]) {
      return bosses.map((boss, index) => boss.shortName + (index == 0 ? " (up)" : "")).join(", ");
    },
  },
});
</script>
